# _icarus
# Enable autoloading
compdef icarus

_icarus() {
  local -a commands
  local -a amazon_args builder_args macos_args unison_args

  commands=(
    '--amazon:Utilities for Amazon environment'
    '--builder:Utilities for software development'
    '--macos:Utilities for macOS'
    '--unison:Utilities to manage Unison daemon'
    '-h:Show help'
    '--help:Show help'
  )

  amazon_args=(
    '-a --auth-init:Run midway authentication'
    '-c --midway-cookie:Check cookies validity'
    '-d --devdsk-formation:Run DevDsk Formation'
    '-s --update-hosts:Update /etc/hosts'
    '-u --update-hosts-d:Install a daemon for hosts update'
    '-b --brazil-setup:Create case-sensitive volumes'
    '-r --spurdog-ro:Check membership for Spurdog Program'
  )

  builder_args=(
    '-p --python-package-init:Initiate a new Python package'
    '-d --dotfiles-update:Update dotfiles from repo'
  )

  macos_args=(
    '-f --find-unencrypted-volumes:Find all unencrypted volumes'
    '-c --make-encrypted-volume:Make an encrypted APFS volume'
    '-e --encrypt-volume:Encrypt an existing APFS volume'
    '-m --mount-volume:Mount the specified volume'
    '-l --mount-at-startup:Install a daemon to mount at startup'
  )

  unison_args=(
    '-i --status:Check Unison status'
    '-s --start:Start Unison sync'
    '-k --stop:Stop Unison sync'
    '-c --clear-locks:Clear Unison locks'
    '-l --start-at-startup:Install a daemon to start Unison at startup'
  )

  case "$words[1]" in
    --amazon)
      _describe 'args' amazon_args
      ;;
    --builder)
      _describe 'args' builder_args
      ;;
    --macos)
      _describe 'args' macos_args
      ;;
    --unison)
      _describe 'args' unison_args
      ;;
    *)
      _describe 'commands' commands
      ;;
  esac
}

# Register the completion function
compdef _icarus icarus
